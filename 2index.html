<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Êñá‰ª∂‰∏ãËΩΩÁ´ô+Èü≥‰πêÊí≠ÊîæÂô®</title>
  <style>
    :root {
      --primary-color: #2196F3;
      --primary-light: #64B5F6;
      --primary-dark: #1976D2;
      --bg-color: #000;
      --card-bg: #222;
      --text-color: #fff;
      --text-secondary: #ccc;
      --border-radius: 8px;
      --transition-speed: 0.3s;
    }

    * { 
      margin: 0; 
      padding: 0; 
      box-sizing: border-box; 
    }
    
    body {
      background: var(--bg-color); 
      color: var(--text-color);
      padding: 20px 0;
      min-height: 100vh;
      padding-right: 15px;
      padding-bottom: 70px;
      font-family: "Microsoft YaHei", Arial, sans-serif;
      position: relative;
      overflow-x: hidden;
    }
    
    .snow-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
    }
    
    .snowflake {
      position: absolute;
      color: var(--text-color);
      font-size: 12px;
      opacity: 0.7;
      animation: snowfall linear infinite;
      user-select: none;
    }
    
    @keyframes snowfall {
      0% {
        transform: translateY(-10px) translateX(0) rotate(0deg);
        opacity: 0;
      }
      10% {
        opacity: 0.7;
      }
      90% {
        opacity: 0.7;
      }
      100% {
        transform: translateY(100vh) translateX(20px) rotate(360deg);
        opacity: 0;
      }
    }
    
    .content-wrap {
      width: 95%;
      max-width: 500px;
      margin: 0 auto;
      padding: 10px;
      position: relative;
      z-index: 1;
    }
    
    h1 {
      text-align: center;
      margin-bottom: 15px;
      color: var(--primary-color);
      text-shadow: 0 0 8px rgba(33, 150, 243, 0.5);
      font-size: 20px;
    }
    
    .search-box {
      width: 100%;
      margin: 0 auto 15px;
      position: relative;
    }
    
    .search-input {
      width: 100%;
      padding: 10px 15px;
      border: none;
      border-radius: 25px;
      background: var(--card-bg);
      color: var(--text-color);
      font-size: 14px;
      outline: none;
      padding-left: 40px;
      transition: box-shadow var(--transition-speed) ease;
    }
    
    .search-input:focus {
      box-shadow: 0 0 0 2px var(--primary-color);
    }
    
    .search-icon {
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: #888;
      font-size: 16px;
      pointer-events: none;
    }
    
    .category-scroll {
      overflow-x: auto;
      white-space: nowrap;
      padding: 8px 0;
      margin: 0 auto 15px;
      width: 100vw;
      position: relative;
      left: 50%;
      transform: translateX(-50%);
      padding-left: 2.5%;
      padding-right: 2.5%;
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
    
    .category-scroll::-webkit-scrollbar {
      display: none;
    }
    
    .category-btns {
      position: relative;
      display: inline-flex;
      gap: 8px;
    }
    
    .category-bg {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      background: var(--text-color);
      border-radius: 20px;
      transition: left var(--transition-speed) ease, width var(--transition-speed) ease;
      z-index: 1;
      border: none;
      box-shadow: none;
    }
    
    .category-btn {
      padding: 8px 16px;
      margin: 0;
      border: none;
      border-radius: 20px;
      background: transparent;
      color: var(--text-color);
      cursor: pointer;
      font-size: 14px;
      position: relative;
      z-index: 2;
      transition: color var(--transition-speed);
      outline: none;
      -webkit-tap-highlight-color: transparent;
      white-space: nowrap;
    }
    
    .category-btn.active {
      color: var(--primary-color);
      font-weight: 600;
    }
    
    .file-list { 
      display: none; 
    }
    
    .file-list.active { 
      display: block; 
    }
    
    .file-item {
      padding: 12px;
      margin: 8px 0;
      background: var(--card-bg);
      border-radius: var(--border-radius);
      border-left: 3px solid var(--primary-color);
      transition: all var(--transition-speed);
      font-size: 14px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      animation: fadeIn 0.3s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(5px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .file-item:hover {
      background: #2a2a2a;
      transform: translateY(-1px);
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }
    
    .download-btn {
      color: var(--primary-light);
      text-decoration: none;
      padding: 4px 8px;
      border-radius: 4px;
      background: rgba(100, 181, 246, 0.1);
      transition: all var(--transition-speed);
      position: relative;
      font-size: 12px;
      font-weight: 500;
    }
    
    .download-btn:hover {
      background: var(--primary-light);
      color: var(--text-color);
    }
    
    .download-btn[data-tooltip] {
      position: relative;
    }
    
    .download-btn[data-tooltip]::before {
      content: attr(data-tooltip);
      position: absolute;
      top: -25px;
      left: 50%;
      transform: translateX(-50%);
      background: #333;
      color: var(--text-color);
      padding: 3px 6px;
      border-radius: 3px;
      font-size: 10px;
      opacity: 0;
      transition: opacity var(--transition-speed);
      pointer-events: none;
      white-space: nowrap;
    }
    
    .download-btn[data-tooltip]:hover::before {
      opacity: 1;
    }
    
    .toggle-icon {
      position: fixed;
      right: 10px;
      bottom: 10px;
      width: 40px;
      height: 40px;
      background: var(--primary-color);
      border-radius: 50%;
      cursor: pointer;
      transition: all var(--transition-speed) ease;
      z-index: 1000;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .toggle-icon::after {
      content: '‚ô™';
      color: var(--text-color);
      font-size: 18px;
      transition: transform var(--transition-speed);
    }
    
    .toggle-icon.rotated::after {
      transform: rotate(180deg);
    }
    
    .player-container {
      position: fixed;
      right: 10px;
      bottom: 60px;
      width: 250px;
      background: #1a1a1a;
      border-radius: 10px;
      padding: 15px;
      display: none;
      z-index: 999;
      box-shadow: 0 5px 20px rgba(0,0,0,0.5);
      border: 1px solid var(--primary-color);
    }
    
    .player-container.show {
      display: block;
      animation: fadeIn 0.3s ease;
    }
    
    .music-cover {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      margin: 0 auto 8px;
      overflow: hidden;
      position: relative;
    }
    
    .color-record {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: conic-gradient(
        red 0deg 51.4deg,
        orange 51.4deg 102.8deg,
        yellow 102.8deg 154.2deg,
        green 154.2deg 205.6deg,
        cyan 205.6deg 257deg,
        blue 257deg 308.4deg,
        purple 308.4deg 360deg
      );
      animation: spin 3s linear infinite;
      animation-play-state: paused;
      position: relative;
    }
    
    .color-record::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #222;
      border: 2px solid var(--text-color);
    }
    
    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    
    .player-info {
      text-align: center;
      width: 100%;
    }
    
    .music-name {
      font-size: 12px;
      color: var(--text-secondary);
      margin-bottom: 6px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .progress-bar {
      width: 100%;
      height: 3px;
      background: #333;
      border-radius: 2px;
      margin-bottom: 6px;
      cursor: pointer;
      overflow: hidden;
    }
    
    .progress-fill {
      height: 100%;
      background: var(--primary-color);
      width: 0%;
      border-radius: 2px;
      transition: width 0.1s linear;
    }
    
    .time-display {
      font-size: 10px;
      color: var(--text-secondary);
      margin-bottom: 8px;
      display: flex;
      justify-content: space-between;
    }
    
    .volume-control {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      margin-bottom: 8px;
    }
    
    .volume-icon {
      color: var(--text-secondary);
      font-size: 12px;
    }
    
    .volume-slider {
      width: 60px;
      height: 3px;
      background: #333;
      border-radius: 2px;
      cursor: pointer;
      appearance: none;
    }
    
    .volume-slider::-webkit-slider-thumb {
      appearance: none;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: var(--primary-color);
      cursor: pointer;
      transition: transform 0.2s;
    }
    
    .volume-slider::-webkit-slider-thumb:hover {
      transform: scale(1.2);
    }
    
    .music-btn {
      padding: 6px 12px;
      border: none;
      border-radius: 5px;
      background: var(--primary-color);
      color: var(--text-color);
      cursor: pointer;
      margin-top: 6px;
      transition: all var(--transition-speed);
      outline: none;
      -webkit-tap-highlight-color: transparent;
      font-size: 12px;
      font-weight: 500;
      width: 100%;
    }
    
    .music-btn:hover {
      background: var(--primary-dark);
      box-shadow: 0 2px 8px rgba(33, 150, 243, 0.4);
    }
    
    .empty-tip {
      text-align: center;
      color: #888;
      padding: 20px 0;
      font-size: 14px;
      display: none;
    }
    
    .loading {
      display: inline-block;
      width: 12px;
      height: 12px;
      border: 2px solid #f3f3f3;
      border-top: 2px solid var(--primary-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-right: 5px;
    }
  </style>
</head>
<body>
  <div class="snow-container" id="snowContainer"></div>

  <div class="content-wrap">
    <h1>Êñá‰ª∂‰∏ãËΩΩÁ´ô</h1>

    <div class="search-box">
      <span class="search-icon">üîç</span>
      <input type="text" class="search-input" id="searchInput" placeholder="ÊêúÁ¥¢Êñá‰ª∂ÂêçÁß∞..." autocomplete="off">
    </div>

    <div class="category-scroll">
      <div class="category-btns">
        <div class="category-bg"></div>
        <button class="category-btn active" data-cate="all">ÂÖ®ÈÉ®Êñá‰ª∂</button>
        <button class="category-btn" data-cate="pdf">PDFÊñáÊ°£</button>
        <button class="category-btn" data-cate="zip">ÂéãÁº©ÂåÖ</button>
        <button class="category-btn" data-cate="doc">WordÊñáÊ°£</button>
      </div>
    </div>

    <div class="file-list active" id="all">
      <div class="file-item">Âú∞ÁêÜÁ¨îËÆ∞.pdf <a href="files/geo.pdf" class="download-btn" download data-tooltip="‰∏ãËΩΩ">‰∏ãËΩΩ</a></div>
      <div class="file-item">Â§ç‰π†ËµÑÊñô.zip <a href="files/data.zip" class="download-btn" download data-tooltip="‰∏ãËΩΩ">‰∏ãËΩΩ</a></div>
      <div class="file-item">‰ΩúÊñáÊ®°Êùø.docx <a href="files/doc.docx" class="download-btn" download data-tooltip="‰∏ãËΩΩ">‰∏ãËΩΩ</a></div>
    </div>
    <div class="file-list" id="pdf"><div class="file-item">Âú∞ÁêÜÁ¨îËÆ∞.pdf <a href="files/geo.pdf" class="download-btn" download data-tooltip="‰∏ãËΩΩ">‰∏ãËΩΩ</a></div></div>
    <div class="file-list" id="zip"><div class="file-item">Â§ç‰π†ËµÑÊñô.zip <a href="files/data.zip" class="download-btn" download data-tooltip="‰∏ãËΩΩ">‰∏ãËΩΩ</a></div></div>
    <div class="file-list" id="doc"><div class="file-item">‰ΩúÊñáÊ®°Êùø.docx <a href="files/doc.docx" class="download-btn" download data-tooltip="‰∏ãËΩΩ">‰∏ãËΩΩ</a></div></div>
    <div class="empty-tip" id="emptyTip">Êú™ÊâæÂà∞ÂåπÈÖçÁöÑÊñá‰ª∂</div>
  </div>

  <div class="toggle-icon" id="toggleIcon"></div>

  <div class="player-container" id="playerContainer">
    <div class="music-cover">
      <div class="color-record" id="colorRecord"></div>
    </div>
    <div class="player-info">
      <div class="music-name">ËÉåÊôØËΩªÈü≥‰πê - Ê≤ªÊÑàÁ≥ª</div>
      <div class="progress-bar" id="progressBar">
        <div class="progress-fill" id="progressFill"></div>
      </div>
      <div class="time-display">
        <span id="currentTime">00:00</span>
        <span id="totalTime">00:00</span>
      </div>
      <div class="volume-control">
        <span class="volume-icon">üîä</span>
        <input type="range" class="volume-slider" id="volumeSlider" min="0" max="1" step="0.01" value="1">
      </div>
      <button class="music-btn" id="musicBtn">ÁÇπÂáªÊí≠Êîæ</button>
      <audio id="audio" src="music/background.mp3" loop>
    </div>
  </div>

  <script>
    (function() {
      'use strict';
      
      const SNOW_COUNT = 30;
      const SNOW_UPDATE_INTERVAL = 1000;
      
      const elements = {
        searchInput: document.getElementById('searchInput'),
        emptyTip: document.getElementById('emptyTip'),
        toggleIcon: document.getElementById('toggleIcon'),
        playerContainer: document.getElementById('playerContainer'),
        audio: document.getElementById('audio'),
        colorRecord: document.getElementById('colorRecord'),
        musicBtn: document.getElementById('musicBtn'),
        progressBar: document.getElementById('progressBar'),
        progressFill: document.getElementById('progressFill'),
        currentTimeEl: document.getElementById('currentTime'),
        totalTimeEl: document.getElementById('totalTime'),
        volumeSlider: document.getElementById('volumeSlider'),
        snowContainer: document.getElementById('snowContainer'),
        categoryBg: document.querySelector('.category-bg'),
        categoryBtns: document.querySelectorAll('.category-btn'),
        fileLists: document.querySelectorAll('.file-list')
      };
      
      const state = {
        isPlaying: false,
        currentCategory: 'all',
        snowflakes: []
      };
      
      const utils = {
        formatTime: (seconds) => {
          const mins = Math.floor(seconds / 60);
          const secs = Math.floor(seconds % 60);
          return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        },
        
        debounce: (func, wait) => {
          let timeout;
          return function executedFunction(...args) {
            const later = () => {
              clearTimeout(timeout);
              func(...args);
            };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
          };
        }
      };
      
      function initCategorySwitcher() {
        const activeBtn = document.querySelector('.category-btn.active');
        elements.categoryBg.style.width = `${activeBtn.offsetWidth}px`;
        elements.categoryBg.style.left = `${activeBtn.offsetLeft}px`;
        
        elements.categoryBtns.forEach(btn => {
          btn.addEventListener('click', () => {
            elements.categoryBg.style.width = `${btn.offsetWidth}px`;
            elements.categoryBg.style.left = `${btn.offsetLeft}px`;
            
            elements.categoryBtns.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            
            elements.fileLists.forEach(list => list.classList.remove('active'));
            document.getElementById(btn.dataset.cate).classList.add('active');
            
            elements.searchInput.value = '';
            elements.emptyTip.style.display = 'none';
            
            const currentItems = document.querySelectorAll(`#${btn.dataset.cate} .file-item`);
            currentItems.forEach(item => item.style.display = 'flex');
            
            state.currentCategory = btn.dataset.cate;
          });
        });
      }
      
      function initSearch() {
        const handleSearch = () => {
          const searchText = elements.searchInput.value.toLowerCase().trim();
          const activeList = document.querySelector('.file-list.active');
          const fileItems = activeList.querySelectorAll('.file-item');
          let hasMatch = false;
          
          fileItems.forEach(item => {
            const fileName = item.textContent.toLowerCase().trim();
            if (fileName.includes(searchText)) {
              item.style.display = 'flex';
              hasMatch = true;
            } else {
              item.style.display = 'none';
            }
          });
          
          elements.emptyTip.style.display = hasMatch ? 'none' : 'block';
        };
        
        elements.searchInput.addEventListener('input', utils.debounce(handleSearch, 300));
      }
      
      function initMusicPlayer() {
        elements.toggleIcon.addEventListener('click', () => {
          elements.toggleIcon.classList.toggle('rotated');
          elements.playerContainer.classList.toggle('show');
        });
        
        elements.audio.addEventListener('loadedmetadata', () => {
          elements.totalTimeEl.textContent = utils.formatTime(elements.audio.duration);
        });
        
        elements.audio.addEventListener('timeupdate', () => {
          const progress = (elements.audio.currentTime / elements.audio.duration) * 100;
          elements.progressFill.style.width = `${progress}%`;
          elements.currentTimeEl.textContent = utils.formatTime(elements.audio.currentTime);
        });
        
        elements.progressBar.addEventListener('click', (e) => {
          const rect = elements.progressBar.getBoundingClientRect();
          const clickX = e.clientX - rect.left;
          const progress = (clickX / rect.width) * elements.audio.duration;
          elements.audio.currentTime = Math.max(0, Math.min(progress, elements.audio.duration));
        });
        
        elements.volumeSlider.addEventListener('input', () => {
          elements.audio.volume = elements.volumeSlider.value;
        });
        
        elements.musicBtn.addEventListener('click', () => {
          if (state.isPlaying) {
            elements.audio.pause();
            elements.colorRecord.style.animationPlayState = 'paused';
          } else {
            elements.audio.play().catch(error => {
              console.error('Play failed:', error);
              elements.musicBtn.textContent = 'Êí≠ÊîæÂ§±Ë¥•';
            });
          }
        });
        
        elements.audio.addEventListener('play', () => {
          elements.colorRecord.style.animationPlayState = 'running';
          elements.musicBtn.textContent = 'ÁÇπÂáªÊöÇÂÅú';
          state.isPlaying = true;
        });
        
        elements.audio.addEventListener('pause', () => {
          elements.colorRecord.style.animationPlayState = 'paused';
          elements.musicBtn.textContent = 'ÁÇπÂáªÊí≠Êîæ';
          state.isPlaying = false;
        });
        
        elements.audio.addEventListener('error', () => {
          console.error('Audio load failed');
          elements.musicBtn.textContent = 'Âä†ËΩΩÂ§±Ë¥•';
          elements.musicBtn.disabled = true;
        });
      }
      
      function initSnowEffect() {
        function createSnowflake() {
          const snowflake = document.createElement('div');
          snowflake.className = 'snowflake';
          snowflake.textContent = '‚ùÑÔ∏è';
          snowflake.style.cssText = `
            left: ${Math.random() * 100}%;
            font-size: ${Math.random() * 6 + 6}px;
            animation-duration: ${Math.random() * 10 + 10}s;
            animation-delay: ${Math.random() * 5}s;
            opacity: ${Math.random() * 0.5 + 0.3};
          `;
          
          elements.snowContainer.appendChild(snowflake);
          state.snowflakes.push(snowflake);
          
          if (state.snowflakes.length > SNOW_COUNT * 2) {
            const oldSnow = state.snowflakes.shift();
            if (oldSnow && oldSnow.parentNode) {
              oldSnow.parentNode.removeChild(oldSnow);
            }
          }
        }
        
        for (let i = 0; i < SNOW_COUNT; i++) {
          createSnowflake();
        }
        
        setInterval(createSnowflake, SNOW_UPDATE_INTERVAL);
        
        document.addEventListener('visibilitychange', () => {
          const snowflakes = document.querySelectorAll('.snowflake');
          snowflakes.forEach(snow => {
            snow.style.animationPlayState = document.hidden ? 'paused' : 'running';
          });
        });
      }
      
      function initDownloadTracking() {
        document.querySelectorAll('.download-btn').forEach(btn => {
          btn.addEventListener('click', (e) => {
            const fileName = btn.parentElement.textContent.trim();
            console.log(`Download file: ${fileName}`);
          });
        });
      }
      
      function init() {
        initCategorySwitcher();
        initSearch();
        initMusicPlayer();
        initSnowEffect();
        initDownloadTracking();
        
        elements.audio.load();
        
        document.addEventListener('keydown', (e) => {
          if (e.code === 'Space' && !e.target.matches('input, textarea')) {
            e.preventDefault();
            elements.musicBtn.click();
          }
          if (e.code === 'Escape' && elements.playerContainer.classList.contains('show')) {
            elements.toggleIcon.click();
          }
        });
      }
      
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
      } else {
        init();
      }
      
      window.app = { elements, state, utils };
      
    })();
  </script>
</body>
</html>